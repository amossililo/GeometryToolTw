<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>House Plan Sketcher</title>
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <aside>
      <header>
        <h1>House Plan Sketcher</h1>
        <p>
          Create clean 2D floor plans with simple drag lines. Everything snaps to the grid and stays
          perfectly horizontal or vertical.
        </p>
      </header>

      <div class="card" aria-label="Drawing instructions">
        <strong>How to draw</strong>
        <ol class="instructions-list">
          <li>Click or tap on the grid to choose a starting point.</li>
          <li>Drag horizontally or vertically to set the wall length.</li>
          <li>Release to place the wall. Repeat to build your plan.</li>
          <li>Click any wall to select it, then choose <strong>Erase selected</strong> to remove it.</li>
        </ol>
        <p class="helper-text">
          Need to tweak something? Use <strong>Undo</strong> to remove the last wall, <strong>Erase selected</strong>
          to delete a picked wall, or <strong>Clear</strong> to start fresh.
        </p>
      </div>

      <div class="card" aria-label="Options">
        <label>
          Grid spacing
          <input id="gridSize" type="number" min="10" step="5" value="30" aria-describedby="gridHelp" />
        </label>
        <span id="gridHelp" class="helper-text">Pixels between grid lines. Larger numbers = bigger rooms.</span>

        <label>
          Real-world scale
          <input id="unitLabel" type="text" value="m" aria-describedby="scaleHelp" />
        </label>
        <label>
          Units per grid square
          <input id="unitPerCell" type="number" min="1" step="1" value="1" />
        </label>
        <span id="scaleHelp" class="helper-text">Example: 1 square = 1 m.</span>

        <div class="button-row">
          <button id="undoButton" class="secondary" type="button">Undo</button>
          <button id="eraseButton" class="secondary" type="button" disabled>Erase selected</button>
          <button id="clearButton" class="secondary" type="button">Clear</button>
        </div>
        <button id="downloadButton" type="button">Download PNG</button>
      </div>

      <div class="card" aria-label="Google Sheets export">
        <strong>Send metrics to Google Sheets</strong>
        <label class="label-stacked">
          Web app URL
          <input id="sheetsUrl" type="url" inputmode="url" placeholder="https://script.google.com/..." />
        </label>
        <p class="helper-text">
          Paste the URL of a Google Apps Script web app that appends rows to your sheet.
        </p>
        <button id="sendSheetsButton" type="button" class="secondary">Send to Google Sheets</button>
        <p id="sheetsStatus" class="status-line" role="status" aria-live="polite"></p>
      </div>

      <footer class="tip-footer">
        <strong>Tip</strong>
        Draw walls in the order you would walk around the building. This makes it easier to see the total
        length and check that the shape closes neatly.
      </footer>
    </aside>

    <main>
      <div class="top-bar">
        <span>Click and drag inside the grid to place walls.</span>
        <span>Walls snap to the nearest square for crisp 90° corners.</span>
      </div>
      <div class="canvas-wrapper">
        <canvas id="planCanvas" aria-label="Plan canvas"></canvas>
      </div>
      <div class="footer">
        <div class="metrics">
          <div class="metric">
            Walls drawn
            <span id="wallCount">0</span>
          </div>
          <div class="metric">
            Total length
            <span id="totalLength">0</span>
          </div>
          <div class="metric">
            Enclosed area
            <span id="enclosedArea">0</span>
          </div>
          <div class="metric">
            Last wall
            <span id="lastWall">–</span>
          </div>
        </div>
        <div class="helper-text">
          Measurements update automatically as you draw.
        </div>
      </div>
    </main>

    <script src="sheets-export.js"></script>
    <script type="module" src="assets/js/main.js"></script>
  </body>
</html>
